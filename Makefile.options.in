################################################################################
# ---------------------------- PROJECT DIRECTORY -------------------------------
################################################################################

BASEDIR   = PWD

################################################################################
# ----------------------- COMPILER OPTIMIZATION FLAGS ------------------------ #
################################################################################

#CPP = /opt/intel/cce/10.1.018/bin/icc
CPP = g++
#CPP  = nvcc
CFLAGS = -Wall -Wno-deprecated -Wno-write-strings -Wno-strict-aliasing -fopenmp -O3 -march=core2
#CFLAGS = -Wall -Wno-deprecated -Wno-write-strings -Wno-strict-aliasing -fopenmp -O3 ##FLAGS FOR GCC
#CFLAGS = -O3 -xT -ipo -gcc ##FLAGS FOR ICC
#CFLAGS = --host-compilation=C++ -Xcompiler -fopenmp -lgomp -O3

#################################################################################
# -------------------------- SUBDIRECTORY SETTINGS ---------------------------- #
#################################################################################

AR          = ar
MOC         = moc
BIN         = bin/
OBJ         = obj/
EXT         = ext/
LIB         = lib/
MCSRC       = src/mcubes/
VIEWERSRC   = src/viewer/

##################################################################################
# ------------------------- ADDITIONAL INCLUDE DIRS ---------------------------- #
##################################################################################

CFLAGS     += -I$(BASEDIR)/ext/ann -I$(BASEDIR)ext/ann/ANN
CFLAGS     += -I$(HOME)/local/include

##################################################################################
# --------------------------- EXTERNAL LIBRARIES ------------------------------- #
##################################################################################

LIBANN	   = $(LIB)libann.a
NEWMAT     = $(LIB)libnewmat.a
LIB3D	   = $(HOME)/local/lib/lib3d.a
BOOST      = -lboost_filesystem -lboost_program_options

##################################################################################
# ------------------------- UNCOMMENT THIS FOR MACS ---------------------------- #
##################################################################################

OSXFLAGS    = #-DMAC_OSX # TO DO: AUTO SELECTION

##################################################################################
# ------------------------- OPENGL AND QT SETTINGS ----------------------------- #
##################################################################################

ifndef $(MACVERSION)
GLLIBS     = -lGL -lGLU
QTLIBS     = -lQtGui -lQtOpenGL
QTINCLUDES = -I/usr/include/qt4/ -I/usr/include/qt4/QtGui/ -I/usr/include/qt4/QtOpenGL/

else
GLLIBS     = -framework OpenGL
QTLIBS     = -framework QTKit
QTINCLUDES = -I/usr/local/Trolltech/Qt-4.4.3/include/ \
             -I/usr/local/Trolltech/Qt-4.4.3/include/QtGui/ \
             -I/usr/local/Trolltech/Qt-4.4.3/include/QtOpenGL/ \
             -F/usr/local/Trolltech/Qt-4.4.3/lib/
QTLIBS     = -framework QtGui -framework QtOpenGL -framework QtCore
endif

ifeq ($(OSXFLAGS), -DMAC_OSX)
GLLIBS     = -framework OpenGL -framework GLUT
else
GLLIBS     = -lGL -lGLU -lglut
endif

CFLAGS     += $(OSXFLAGS) $(QTINCLUDES) 

##################################################################################
# ---------------------------- SUPPRESS WARNINGS ------------------------------- #
##################################################################################
CFLAGS	   +=  -Wno-deprecated -Wno-write-strings -Wno-strict-aliasing
#CFLAGS     += -Wall